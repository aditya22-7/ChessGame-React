{"ast":null,"code":"import { asc } from \"./helper-funcs\";\nimport socketHandler from \"./socketHandler\";\nexport let gameData = null;\nexport const checkLogin = (username, password, count) => {\n  let response, error, promise;\n  promise = fetch(\"http://localhost:8081/auth\", {\n    method: \"POST\",\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    referrerPolicy: \"origin\",\n    body: JSON.stringify({\n      username: username,\n      password: password,\n      count: count\n    })\n  }).then(res => res.json()).then(res => response = res).catch(err => error = err);\n  return {\n    read() {\n      if (error) throw error;\n      if (response) return response;\n      throw promise;\n    }\n  };\n};\nexport const checkLoginStatus = () => {\n  let response, error, promise;\n  promise = fetch(\"http://localhost:8081/auth\", {\n    method: \"POST\",\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    referrerPolicy: \"origin\"\n  }).then(res => res.json()).then(res => response = res).catch(err => error = err);\n  return {\n    read() {\n      if (error) throw error;\n      if (response) return response;\n      throw promise;\n    }\n  };\n};\nexport const logout = async callback => {\n  await fetch(\"http://localhost:8081/logout\", {\n    method: \"POST\",\n    credentials: \"include\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    referrerPolicy: \"origin\"\n  }).then(res => res.json());\n  callback();\n};\nexport const initSocket = () => socketHandler.init();\nexport const disconnect = () => socketHandler.disconnect();\nexport const createNewGame = async (name, callback) => {\n  const ret = await socketHandler.createNewGame(name);\n  gameData = ret;\n  callback(name, gameData.name);\n};\nexport async function getPermittedTiles(row, col, callback) {\n  const pt = await socketHandler.makeMoveFrom({\n    row: asc([row, 7]),\n    col\n  });\n  callback(pt);\n}\nexport async function getMove(callback) {\n  const data = await socketHandler.getMove();\n  callback(data);\n}\nexport async function makeMove(row, col, callback) {\n  const to = await socketHandler.makeMoveTo({\n    row: asc([row, 7]),\n    col\n  });\n  callback(to);\n}\nexport async function leaveGame(callback) {\n  await socketHandler.sendLeaveMessage();\n  callback();\n}\nexport async function listenPlayerLeft(callback) {\n  await socketHandler.listenPlayerLeft();\n  callback();\n}","map":{"version":3,"names":["asc","socketHandler","gameData","checkLogin","username","password","count","response","error","promise","fetch","method","credentials","headers","referrerPolicy","body","JSON","stringify","then","res","json","catch","err","read","checkLoginStatus","logout","callback","initSocket","init","disconnect","createNewGame","name","ret","getPermittedTiles","row","col","pt","makeMoveFrom","getMove","data","makeMove","to","makeMoveTo","leaveGame","sendLeaveMessage","listenPlayerLeft"],"sources":["/home/adis-dell/Documents/JS/JS_rpise2/Chess_React/chessclient/src/Controller.js"],"sourcesContent":["import { asc } from \"./helper-funcs\";\nimport socketHandler from \"./socketHandler\";\n\nexport let gameData = null;\n\nexport const checkLogin = (username, password, count) => {\n\tlet response, error, promise;\n\tpromise = fetch(\"http://localhost:8081/auth\", {\n\t\tmethod: \"POST\",\n\t\tcredentials: \"include\",\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t},\n\t\treferrerPolicy: \"origin\",\n\t\tbody: JSON.stringify({\n\t\t\tusername: username,\n\t\t\tpassword: password,\n\t\t\tcount: count,\n\t\t}),\n\t})\n\t\t.then((res) => res.json())\n\t\t.then((res) => (response = res))\n\t\t.catch((err) => (error = err));\n\treturn {\n\t\tread() {\n\t\t\tif (error) throw error;\n\t\t\tif (response) return response;\n\t\t\tthrow promise;\n\t\t},\n\t};\n};\n\nexport const checkLoginStatus = () => {\n\tlet response, error, promise;\n\tpromise = fetch(\"http://localhost:8081/auth\", {\n\t\tmethod: \"POST\",\n\t\tcredentials: \"include\",\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t},\n\t\treferrerPolicy: \"origin\",\n\t})\n\t\t.then((res) => res.json())\n\t\t.then((res) => (response = res))\n\t\t.catch((err) => (error = err));\n\treturn {\n\t\tread() {\n\t\t\tif (error) throw error;\n\t\t\tif (response) return response;\n\t\t\tthrow promise;\n\t\t},\n\t};\n};\n\nexport const logout = async (callback) => {\n\tawait fetch(\"http://localhost:8081/logout\", {\n\t\tmethod: \"POST\",\n\t\tcredentials: \"include\",\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\",\n\t\t},\n\t\treferrerPolicy: \"origin\",\n\t}).then((res) => res.json());\n\tcallback();\n};\n\nexport const initSocket = () => socketHandler.init();\n\nexport const disconnect = () => socketHandler.disconnect();\n\nexport const createNewGame = async (name, callback) => {\n\tconst ret = await socketHandler.createNewGame(name);\n\tgameData = ret;\n\tcallback(name, gameData.name);\n};\n\nexport async function getPermittedTiles(row, col, callback) {\n\tconst pt = await socketHandler.makeMoveFrom({ row: asc([row, 7]), col });\n\tcallback(pt);\n}\n\nexport async function getMove(callback) {\n\tconst data = await socketHandler.getMove();\n\tcallback(data);\n}\n\nexport async function makeMove(row, col, callback) {\n\tconst to = await socketHandler.makeMoveTo({ row: asc([row, 7]), col });\n\tcallback(to);\n}\n\nexport async function leaveGame(callback) {\n\tawait socketHandler.sendLeaveMessage();\n\tcallback();\n}\n\nexport async function listenPlayerLeft(callback) {\n\tawait socketHandler.listenPlayerLeft();\n\tcallback();\n}\n"],"mappings":"AAAA,SAASA,GAAG,QAAQ,gBAAgB;AACpC,OAAOC,aAAa,MAAM,iBAAiB;AAE3C,OAAO,IAAIC,QAAQ,GAAG,IAAI;AAE1B,OAAO,MAAMC,UAAU,GAAGA,CAACC,QAAQ,EAAEC,QAAQ,EAAEC,KAAK,KAAK;EACxD,IAAIC,QAAQ,EAAEC,KAAK,EAAEC,OAAO;EAC5BA,OAAO,GAAGC,KAAK,CAAC,4BAA4B,EAAE;IAC7CC,MAAM,EAAE,MAAM;IACdC,WAAW,EAAE,SAAS;IACtBC,OAAO,EAAE;MACR,cAAc,EAAE;IACjB,CAAC;IACDC,cAAc,EAAE,QAAQ;IACxBC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MACpBb,QAAQ,EAAEA,QAAQ;MAClBC,QAAQ,EAAEA,QAAQ;MAClBC,KAAK,EAAEA;IACR,CAAC;EACF,CAAC,CAAC,CACAY,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEC,GAAG,IAAMZ,QAAQ,GAAGY,GAAI,CAAC,CAC/BE,KAAK,CAAEC,GAAG,IAAMd,KAAK,GAAGc,GAAI,CAAC;EAC/B,OAAO;IACNC,IAAIA,CAAA,EAAG;MACN,IAAIf,KAAK,EAAE,MAAMA,KAAK;MACtB,IAAID,QAAQ,EAAE,OAAOA,QAAQ;MAC7B,MAAME,OAAO;IACd;EACD,CAAC;AACF,CAAC;AAED,OAAO,MAAMe,gBAAgB,GAAGA,CAAA,KAAM;EACrC,IAAIjB,QAAQ,EAAEC,KAAK,EAAEC,OAAO;EAC5BA,OAAO,GAAGC,KAAK,CAAC,4BAA4B,EAAE;IAC7CC,MAAM,EAAE,MAAM;IACdC,WAAW,EAAE,SAAS;IACtBC,OAAO,EAAE;MACR,cAAc,EAAE;IACjB,CAAC;IACDC,cAAc,EAAE;EACjB,CAAC,CAAC,CACAI,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CACzBF,IAAI,CAAEC,GAAG,IAAMZ,QAAQ,GAAGY,GAAI,CAAC,CAC/BE,KAAK,CAAEC,GAAG,IAAMd,KAAK,GAAGc,GAAI,CAAC;EAC/B,OAAO;IACNC,IAAIA,CAAA,EAAG;MACN,IAAIf,KAAK,EAAE,MAAMA,KAAK;MACtB,IAAID,QAAQ,EAAE,OAAOA,QAAQ;MAC7B,MAAME,OAAO;IACd;EACD,CAAC;AACF,CAAC;AAED,OAAO,MAAMgB,MAAM,GAAG,MAAOC,QAAQ,IAAK;EACzC,MAAMhB,KAAK,CAAC,8BAA8B,EAAE;IAC3CC,MAAM,EAAE,MAAM;IACdC,WAAW,EAAE,SAAS;IACtBC,OAAO,EAAE;MACR,cAAc,EAAE;IACjB,CAAC;IACDC,cAAc,EAAE;EACjB,CAAC,CAAC,CAACI,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC;EAC5BM,QAAQ,CAAC,CAAC;AACX,CAAC;AAED,OAAO,MAAMC,UAAU,GAAGA,CAAA,KAAM1B,aAAa,CAAC2B,IAAI,CAAC,CAAC;AAEpD,OAAO,MAAMC,UAAU,GAAGA,CAAA,KAAM5B,aAAa,CAAC4B,UAAU,CAAC,CAAC;AAE1D,OAAO,MAAMC,aAAa,GAAG,MAAAA,CAAOC,IAAI,EAAEL,QAAQ,KAAK;EACtD,MAAMM,GAAG,GAAG,MAAM/B,aAAa,CAAC6B,aAAa,CAACC,IAAI,CAAC;EACnD7B,QAAQ,GAAG8B,GAAG;EACdN,QAAQ,CAACK,IAAI,EAAE7B,QAAQ,CAAC6B,IAAI,CAAC;AAC9B,CAAC;AAED,OAAO,eAAeE,iBAAiBA,CAACC,GAAG,EAAEC,GAAG,EAAET,QAAQ,EAAE;EAC3D,MAAMU,EAAE,GAAG,MAAMnC,aAAa,CAACoC,YAAY,CAAC;IAAEH,GAAG,EAAElC,GAAG,CAAC,CAACkC,GAAG,EAAE,CAAC,CAAC,CAAC;IAAEC;EAAI,CAAC,CAAC;EACxET,QAAQ,CAACU,EAAE,CAAC;AACb;AAEA,OAAO,eAAeE,OAAOA,CAACZ,QAAQ,EAAE;EACvC,MAAMa,IAAI,GAAG,MAAMtC,aAAa,CAACqC,OAAO,CAAC,CAAC;EAC1CZ,QAAQ,CAACa,IAAI,CAAC;AACf;AAEA,OAAO,eAAeC,QAAQA,CAACN,GAAG,EAAEC,GAAG,EAAET,QAAQ,EAAE;EAClD,MAAMe,EAAE,GAAG,MAAMxC,aAAa,CAACyC,UAAU,CAAC;IAAER,GAAG,EAAElC,GAAG,CAAC,CAACkC,GAAG,EAAE,CAAC,CAAC,CAAC;IAAEC;EAAI,CAAC,CAAC;EACtET,QAAQ,CAACe,EAAE,CAAC;AACb;AAEA,OAAO,eAAeE,SAASA,CAACjB,QAAQ,EAAE;EACzC,MAAMzB,aAAa,CAAC2C,gBAAgB,CAAC,CAAC;EACtClB,QAAQ,CAAC,CAAC;AACX;AAEA,OAAO,eAAemB,gBAAgBA,CAACnB,QAAQ,EAAE;EAChD,MAAMzB,aAAa,CAAC4C,gBAAgB,CAAC,CAAC;EACtCnB,QAAQ,CAAC,CAAC;AACX","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}