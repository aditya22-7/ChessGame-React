{"ast":null,"code":"import _classPrivateFieldLooseBase from \"/home/adis-dell/Documents/JS/JS_rpise2/Chess_React/chessclient/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseBase.js\";\nimport _classPrivateFieldLooseKey from \"/home/adis-dell/Documents/JS/JS_rpise2/Chess_React/chessclient/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseKey.js\";\nimport { io } from \"socket.io-client\";\nimport { empty } from \"./helper-funcs\";\nvar _socket = /*#__PURE__*/_classPrivateFieldLooseKey(\"socket\");\nvar _res = /*#__PURE__*/_classPrivateFieldLooseKey(\"res\");\nexport default class socketHandler {\n  static resolveData(data) {\n    _classPrivateFieldLooseBase(this, _res)[_res](data);\n    _classPrivateFieldLooseBase(this, _res)[_res] = null;\n  }\n  static init() {\n    if (_classPrivateFieldLooseBase(this, _socket)[_socket]) return;\n    _classPrivateFieldLooseBase(this, _socket)[_socket] = io(\"http://localhost:8081\");\n    _classPrivateFieldLooseBase(this, _socket)[_socket].on(\"getdata\", data => {\n      this.resolveData(data);\n    });\n    _classPrivateFieldLooseBase(this, _socket)[_socket].on(\"to\", data => {\n      this.resolveData(data);\n    });\n    _classPrivateFieldLooseBase(this, _socket)[_socket].on(\"from\", data => {\n      this.resolveData(data);\n    });\n    _classPrivateFieldLooseBase(this, _socket)[_socket].on(\"move\", data => {\n      this.resolveData(data);\n    });\n    _classPrivateFieldLooseBase(this, _socket)[_socket].on(\"left\", () => {\n      this.resolveData(0);\n    });\n  }\n  static newGame(name) {\n    _classPrivateFieldLooseBase(this, _socket)[_socket].emit(\"newgame\", name);\n  }\n  static from(data) {\n    _classPrivateFieldLooseBase(this, _socket)[_socket].emit(\"pt\", data);\n  }\n  static to(data) {\n    _classPrivateFieldLooseBase(this, _socket)[_socket].emit(\"to\", data);\n  }\n  static leaveGame() {\n    _classPrivateFieldLooseBase(this, _socket)[_socket].emit(\"leavegame\");\n  }\n  static disconnect() {\n    _classPrivateFieldLooseBase(this, _socket)[_socket].emit(\"end\");\n  }\n  static createSuspensfulResource(callback) {\n    let response, error, promise;\n    promise = new Promise((res, rej) => {\n      _classPrivateFieldLooseBase(this, _res)[_res] = res;\n      callback();\n    }).then(res => response = res).catch(err => error = err);\n    return {\n      read() {\n        if (error) throw error;\n        if (response) return response;\n        throw promise;\n      }\n    };\n  }\n  static createPromise(callback) {\n    return new Promise((res, rej) => {\n      _classPrivateFieldLooseBase(this, _res)[_res] = res;\n      callback();\n    });\n  }\n  static createNewGame(name) {\n    return this.createPromise(() => this.newGame(name));\n  }\n  static makeDataRequest(name) {\n    return this.createPromise(() => this.getData(name));\n  }\n  static makeMoveFrom(data) {\n    return this.createPromise(() => this.from(data));\n  }\n  static makeMoveTo(data) {\n    return this.createPromise(() => this.to(data));\n  }\n  static getMove() {\n    return this.createPromise(empty);\n  }\n  static sendLeaveMessage() {\n    return this.createPromise(() => this.leaveGame());\n  }\n  static listenPlayerLeft() {\n    return new Promise(res => {\n      _classPrivateFieldLooseBase(this, _socket)[_socket].on(\"playerleft\", () => {\n        res(0);\n      });\n    });\n  }\n}\nObject.defineProperty(socketHandler, _socket, {\n  writable: true,\n  value: null\n});\nObject.defineProperty(socketHandler, _res, {\n  writable: true,\n  value: null\n});","map":{"version":3,"names":["io","empty","_socket","_classPrivateFieldLooseKey","_res","socketHandler","resolveData","data","_classPrivateFieldLooseBase","init","on","newGame","name","emit","from","to","leaveGame","disconnect","createSuspensfulResource","callback","response","error","promise","Promise","res","rej","then","catch","err","read","createPromise","createNewGame","makeDataRequest","getData","makeMoveFrom","makeMoveTo","getMove","sendLeaveMessage","listenPlayerLeft","Object","defineProperty","writable","value"],"sources":["/home/adis-dell/Documents/JS/JS_rpise2/Chess_React/chessclient/src/socketHandler.js"],"sourcesContent":["import { io } from \"socket.io-client\";\nimport { empty } from \"./helper-funcs\";\n\nexport default class socketHandler {\n\tstatic #socket = null;\n\tstatic #res = null;\n\tstatic resolveData(data) {\n\t\tthis.#res(data);\n\t\tthis.#res = null;\n\t}\n\n\tstatic init() {\n\t\tif (this.#socket) return;\n\t\tthis.#socket = io(\"http://localhost:8081\");\n\t\tthis.#socket.on(\"getdata\", (data) => {\n\t\t\tthis.resolveData(data);\n\t\t});\n\t\tthis.#socket.on(\"to\", (data) => {\n\t\t\tthis.resolveData(data);\n\t\t});\n\t\tthis.#socket.on(\"from\", (data) => {\n\t\t\tthis.resolveData(data);\n\t\t});\n\t\tthis.#socket.on(\"move\", (data) => {\n\t\t\tthis.resolveData(data);\n\t\t});\n\t\tthis.#socket.on(\"left\", () => {\n\t\t\tthis.resolveData(0);\n\t\t});\n\t}\n\n\tstatic newGame(name) {\n\t\tthis.#socket.emit(\"newgame\", name);\n\t}\n\n\tstatic from(data) {\n\t\tthis.#socket.emit(\"pt\", data);\n\t}\n\n\tstatic to(data) {\n\t\tthis.#socket.emit(\"to\", data);\n\t}\n\n\tstatic leaveGame() {\n\t\tthis.#socket.emit(\"leavegame\");\n\t}\n\n\tstatic disconnect() {\n\t\tthis.#socket.emit(\"end\");\n\t}\n\n\tstatic createSuspensfulResource(callback) {\n\t\tlet response, error, promise;\n\t\tpromise = new Promise((res, rej) => {\n\t\t\tthis.#res = res;\n\t\t\tcallback();\n\t\t})\n\t\t\t.then((res) => (response = res))\n\t\t\t.catch((err) => (error = err));\n\t\treturn {\n\t\t\tread() {\n\t\t\t\tif (error) throw error;\n\t\t\t\tif (response) return response;\n\t\t\t\tthrow promise;\n\t\t\t},\n\t\t};\n\t}\n\n\tstatic createPromise(callback) {\n\t\treturn new Promise((res, rej) => {\n\t\t\tthis.#res = res;\n\t\t\tcallback();\n\t\t});\n\t}\n\n\tstatic createNewGame(name) {\n\t\treturn this.createPromise(() => this.newGame(name));\n\t}\n\n\tstatic makeDataRequest(name) {\n\t\treturn this.createPromise(() => this.getData(name));\n\t}\n\n\tstatic makeMoveFrom(data) {\n\t\treturn this.createPromise(() => this.from(data));\n\t}\n\n\tstatic makeMoveTo(data) {\n\t\treturn this.createPromise(() => this.to(data));\n\t}\n\n\tstatic getMove() {\n\t\treturn this.createPromise(empty);\n\t}\n\n\tstatic sendLeaveMessage() {\n\t\treturn this.createPromise(() => this.leaveGame());\n\t}\n\n\tstatic listenPlayerLeft() {\n\t\treturn new Promise((res) => {\n\t\t\tthis.#socket.on(\"playerleft\", () => {\n\t\t\t\tres(0);\n\t\t\t});\n\t\t});\n\t}\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}